---
layout: post
title: 两种方法打印乘法口决
date: 2014-06-13
---

这两天中了 Scheme 的毒，看完《The Little Schemer》后我别的没学会，就学会了递归。我听说每一个循环最后都能转化成递归，于是我着迷地想把这两天做的C练习题都转换成递归实现。我已经做了两道题了，一道找出水仙花数，一道找素素。

最后尝试的是打印乘法口决，C的原程序是用两层循环实现的，完全无从下手。最后百度到一个用JAVA写的所谓递归版乘法口决。我翻译成 Scheme 代码后是这个样子的：

```scheme
(define (meth1 i)
  (cond
   ((= i 1) (printf "1x1=1\t\n"))
   (else
    (begin (meth1 (- i 1))
           (do ((j 1 (+ j 1)))
               ((> j i) (newline))
             (printf "~ax~a=~a\t" j i (* j i)))))))
```

它的确是递归，不过最内层还是循环嘛。我试图将最内层的循环用递归替换掉，结果代码越搞越复杂，最后还是没搞成。我转念一想，有些事还真是用循环来做更适合，既然 Scheme 提供了循环，为什么不用呢？于是干脆搞成纯粹的循环算了。

```
(define (meth2 n)
  (do ((i 1 (+ i 1)))
      ((> i n) (newline))
    (do ((j 1 (+ j 1)))
        ((> j i) (newline))
      (printf "~ax~a=~a\t" j i (* j i)))))
```

这么一看，代码还算是短小精干。

我估计，do 循环只是个语法糖，就象

    (define (f n)
    
只是

    (define f
      (lambda (n)

的语法糖一样。等有能力了，看看别人是怎么实现的。