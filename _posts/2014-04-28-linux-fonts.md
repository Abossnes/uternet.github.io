---
layout: post
title: 奇葩的字体错乱
date: 2014-04-28
---

因为老爷机上的XP越来越卡，于是我将它的系统换成了Debian + LXDE。花几天工夫终于把系统调教得差不多了。

早上的时候准备看一看以前下载的PDF，结果发现PDF阅读器还没装。既然是老机，那么软件选择就奔着轻量去了。

最先安装的一款PDF阅读器是 epdfview，轻倒是轻量了，可是打开扫描的PDF一片空白，它只能显示字符，不能显示图片。折腾了一下，无果放弃。

后来又尝试了 zathura，操作略蛋痛，放弃。

最后选定了 mupdf，将先前安装的 epdfview 和 zathura 用 apt-get autoremove 卸载了，看了一会PDF，准备关机，偶然间发现关机界面的字体变了，原先是微米黑，现在中文全变成了楷体。我心想不好，我的字体配置被改动了。

于是我放弃关机，回到系统，再一次发现终端下的字体也变了，原先是等宽字体，现在全成了一坨屎。

首先想到的是：会不会是刚刚安装的软件附带了字体配置文件？而且卸载后还有残留？  
mupdf首先被排除，因为在另外一个系统里我同样安装了mupdf，并未出现同样的情况，那么怀疑对象就是安装后又被卸载的 epdfview 和 zathura 了。

到/etc/fonts下面看了一下，没发现异常。配置文件太多，偶尔多了个把文件我也看不出来。

运行 `dpkg -l |grep ^rc|awk '{print $2}' |xargs dpkg -P`

把残留的配置文件都删除掉，还是没有改变。

我开始怀疑 infinality。我的所有字体定制都是通过 infinality来完成的，我自己的配置写在当前style目录里的99-local-conf里面，具有最高的优先级，怎么现在不起作用了呢？切换style，还是没改变，难道infinality废掉了吗？？？

当我快要没办法的时候，我决定去/usr/share/fonts目录下看看，忽然间我发现了问题：

一些字体不见了！

文泉驿微米黑没有了，这是我通过apt-get安装的，也许刚刚 apt-get autoremove 的时候我没注意到，被一起卸载了。

怎么想也想不通微米黑为什么会被卸载掉，它是我单独安装的，在依赖上与epdfview还有zathura完全不发生关系，怎么会被牵连到呢？